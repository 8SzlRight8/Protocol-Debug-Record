# I2C两种驱动方式



## 前言

~~~c
文件结构：
--| i2c_OD   //开漏输出的配置文件
--| i2c_PP   //推挽输出的配置文件
~~~



## 一、GPIO端口配置成OD模式[ok]

~~~c
【设置成开漏输出模式（OD模式）】
    //===> 此模式需要在I2C总线上配置上拉电阻，开漏输出加上上拉电阻才能输出高电平
    设置成开漏输出模式之后，若检测 I2C 的 Ack 命令，直接读SDA线上的电平即可，外部可以影响开漏状态下IO口的输出，并正确读取。
~~~



## 二、GPIO端口配置成PP模式[待测试]

~~~c
【设置成推挽输出模式（PP模式）】
    //===> 此模式不必将在I2C总线上配置上拉电阻
    设置成推挽输出模式之后，需要进行SDA端口的转换，因为推挽输出是强上拉的情况，在输出模式下，外部电压不能将其引脚的高电平拉低，若需检测 I2C 的 Ack 命令，则在读取Ack时将IO口切换成输入模式，在发送命令或数据时，将IO口切换成输出模式。
~~~



## 
